import{U as x,Y as ue,_ as $,c as se,da as L,ea as P,fa as d,ga as A,j as F,t as ae,x as ce}from"./chunk-QPWJ32ZV.js";import{Fa as O,V as ee,Z as te,aa as E,c as C,ca as re,ec as ie,fa as I,fc as M,i as J,j as Q,l as y,m as D,ma as ne,pc as N,wa as oe,za as T}from"./chunk-CHWI6ED7.js";import{o as f}from"./chunk-EMXRSGQS.js";var _e="firebase",be="10.13.0";d(_e,be,"app");var j=new ie("ANGULARFIRE2_VERSION"),_t=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`;function bt(e,r,t){if(r){if(r.length===1)return r[0];let i=r.filter(a=>a.app===t);if(i.length===1)return i[0]}return t.container.getProvider(e).getImmediate({optional:!0})}var ye=(e,r)=>{let t=r?[r]:P(),n=[];return t.forEach(o=>{o.container.getProvider(e).instances.forEach(a=>{n.includes(a)||n.push(a)})}),n},H=class{constructor(){return ye(Ie)}},Ie="app-check";function k(){}var R=class{zone;delegate;constructor(r,t=Q){this.zone=r,this.delegate=t}now(){return this.delegate.now()}schedule(r,t,n){let o=this.zone,i=function(a){o.runGuarded(()=>{r.apply(this,[a])})};return this.delegate.schedule(i,t,n)}},z=class{zone;task=null;constructor(r){this.zone=r}call(r,t){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",k,{},k,k)),t.pipe(ee({next:n,complete:n,error:n})).subscribe(r).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},le=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new R(Zone.current)),this.insideAngular=t.run(()=>new R(Zone.current,J)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||e)(re(T))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function w(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Pe(e){return w().ngZone.runOutsideAngular(()=>e())}function g(e){return w().ngZone.run(()=>e())}function yt(e){return e.pipe(y(w().outsideAngular))}function Re(e){return Se(w())(e)}function Se(e){return function(t){return t=t.lift(new z(e.ngZone)),t.pipe(D(e.outsideAngular),y(e.insideAngular))}}var Ce=(e,r)=>function(){let n=arguments;return r&&setTimeout(()=>{r.state==="scheduled"&&r.invoke()},10),g(()=>e.apply(void 0,n))},De=(e,r)=>function(){let t,n=arguments;for(let i=0;i<arguments.length;i++)typeof n[i]=="function"&&(r&&(t||=g(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",k,{},k,k))),n[i]=Ce(n[i],t));let o=Pe(()=>e.apply(this,n));if(!r)if(o instanceof C){let i=w();return o.pipe(D(i.outsideAngular),y(i.insideAngular))}else return g(()=>o);return o instanceof C?o.pipe(Re):o instanceof Promise?g(()=>new Promise((i,a)=>o.then(s=>g(()=>i(s)),s=>g(()=>a(s))))):typeof o=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),o.apply(this,arguments)}:g(()=>o)};var v=class{constructor(r){return r}},B=class{constructor(){return P()}};function Oe(e){return e&&e.length===1?e[0]:new v(L())}var K=new E("angularfire2._apps"),Me={provide:v,useFactory:Oe,deps:[[new I,K]]},Ne={provide:B,deps:[[new I,K]]};function Fe(e){return(r,t)=>{let n=t.get(O);d("angularfire",j.full,"core"),d("angularfire",j.full,"app"),d("angular",M.full,n.toString());let o=r.runOutsideAngular(()=>e(t));return new v(o)}}function $t(e,...r){return ne([Me,Ne,{provide:K,useFactory:Fe(e),multi:!0,deps:[T,oe,le,...r]}])}var xe="firebase",$e="10.13.0";A.registerVersion(xe,$e,"app-compat");var Le=["ngOnDestroy"],qt=(e,r,t,n={})=>new Proxy(e,{get:(o,i)=>t.runOutsideAngular(()=>{if(e[i])return n?.spy?.get&&n.spy.get(i,e[i]),e[i];if(Le.indexOf(i)>-1)return()=>{};let a=r.toPromise().then(s=>{let c=s?.[i];return typeof c=="function"?c.bind(s):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(s,c)=>a[c],apply:(s,c,u)=>a.then(m=>{let b=m?.(...u);return n?.spy?.apply&&n.spy.apply(i,u,b),b})})})});var V=class{constructor(r){return r}},Zt=new E("angularfire2.app.options"),Gt=new E("angularfire2.app.name");function Xt(e,r,t){let n=typeof t=="string"&&t||"[DEFAULT]",o=typeof t=="object"&&t||{};o.name=o.name||n;let a=A.apps.filter(s=>s&&s.name===o.name)[0]||r.runOutsideAngular(()=>A.initializeApp(e,o));try{if(JSON.stringify(e)!==JSON.stringify(a.options)){let s=!!module.hot;He("error",`${a.name} Firebase App already initialized with different options${s?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new V(a)}var He=(e,...r)=>{N()&&typeof console<"u"&&console[e](...r)};function Yt(e,r,t,n,o){let[,i,a]=globalThis.\u0275AngularfireInstanceCache.find(s=>s[0]===e)||[];if(i)return ze(o,a)||(pe("error",`${r} was already initialized on the ${t} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:o,was:a})),i;{let s=n();return globalThis.\u0275AngularfireInstanceCache.push([e,s,o]),s}}function ze(e,r){try{return e.toString()===r.toString()}catch{return e===r}}var je=typeof module<"u"&&!!module.hot,pe=(e,...r)=>{N()&&typeof console<"u"&&console[e](...r)};globalThis.\u0275AngularfireInstanceCache||=[];var Be=new Map,Ke={activated:!1,tokenObservers:[]},Ve={initialized:!1,enabled:!1};function l(e){return Be.get(e)||Object.assign({},Ke)}function me(){return Ve}var Ue="https://content-firebaseappcheck.googleapis.com/v1";var We="exchangeDebugToken",de={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ur=24*60*60*1e3;var W=class{constructor(r,t,n,o,i){if(this.operation=r,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(r){return f(this,null,function*(){this.stop();try{this.pending=new F,this.pending.promise.catch(t=>{}),yield qe(this.getNextRun(r)),this.pending.resolve(),yield this.pending.promise,this.pending=new F,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(r){if(r)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function qe(e){return new Promise(r=>{setTimeout(r,e)})}var Ze={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},h=new ce("appCheck","AppCheck",Ze);function Ae(e){if(!l(e).activated)throw h.create("use-before-activation",{appName:e.name})}function ke(n,o){return f(this,arguments,function*({url:e,body:r},t){let i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&(i["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(r),headers:i},c;try{c=yield fetch(e,s)}catch(p){throw h.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw h.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(p){throw h.create("fetch-parse-error",{originalErrorMessage:p?.message})}let m=u.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw h.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let b=Number(m[1])*1e3,Y=Date.now();return{token:u.token,expireTimeMillis:Y+b,issuedAtTimeMillis:Y}})}function Ee(e,r){let{projectId:t,appId:n,apiKey:o}=e.options;return{url:`${Ue}/projects/${t}/apps/${n}:${We}?key=${o}`,body:{debug_token:r}}}var Ge="firebase-app-check-database",Xe=1,q="firebase-app-check-store";var S=null;function Ye(){return S||(S=new Promise((e,r)=>{try{let t=indexedDB.open(Ge,Xe);t.onsuccess=n=>{e(n.target.result)},t.onerror=n=>{var o;r(h.create("storage-open",{originalErrorMessage:(o=n.target.error)===null||o===void 0?void 0:o.message}))},t.onupgradeneeded=n=>{let o=n.target.result;switch(n.oldVersion){case 0:o.createObjectStore(q,{keyPath:"compositeKey"})}}}catch(t){r(h.create("storage-open",{originalErrorMessage:t?.message}))}}),S)}function Je(e,r){return Qe(et(e),r)}function Qe(e,r){return f(this,null,function*(){let n=(yield Ye()).transaction(q,"readwrite"),i=n.objectStore(q).put({compositeKey:e,value:r});return new Promise((a,s)=>{i.onsuccess=c=>{a()},n.onerror=c=>{var u;s(h.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function et(e){return`${e.options.appId}-${e.name}`}var Z=new ue("@firebase/app-check");function U(e,r){return ae()?Je(e,r).catch(t=>{Z.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Te(){return me().enabled}function we(){return f(this,null,function*(){let e=me();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var tt={error:"UNKNOWN_ERROR"};function rt(e){return se.encodeString(JSON.stringify(e),!1)}function G(e,r=!1){return f(this,null,function*(){let t=e.app;Ae(t);let n=l(t),o=n.token,i;if(o&&!_(o)&&(n.token=void 0,o=void 0),!o){let c=yield n.cachedTokenPromise;c&&(_(c)?o=c:yield U(t,void 0))}if(!r&&o&&_(o))return{token:o.token};let a=!1;if(Te()){n.exchangeTokenPromise||(n.exchangeTokenPromise=ke(Ee(t,yield we()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),a=!0);let c=yield n.exchangeTokenPromise;return yield U(t,c),n.token=c,{token:c.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),a=!0),o=yield l(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Z.warn(c.message):Z.error(c),i=c}let s;return o?i?_(o)?s={token:o.token,internalError:i}:s=he(i):(s={token:o.token},n.token=o,yield U(t,o)):s=he(i),a&&st(t,s),s})}function nt(e){return f(this,null,function*(){let r=e.app;Ae(r);let{provider:t}=l(r);if(Te()){let n=yield we(),{token:o}=yield ke(Ee(r,n),e.heartbeatServiceProvider);return{token:o}}else{let{token:n}=yield t.getToken();return{token:n}}})}function ot(e,r,t,n){let{app:o}=e,i=l(o),a={next:t,error:n,type:r};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&_(i.token)){let s=i.token;Promise.resolve().then(()=>{t({token:s.token}),fe(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>fe(e))}function ve(e,r){let t=l(e),n=t.tokenObservers.filter(o=>o.next!==r);n.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=n}function fe(e){let{app:r}=e,t=l(r),n=t.tokenRefresher;n||(n=it(e),t.tokenRefresher=n),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function it(e){let{app:r}=e;return new W(()=>f(this,null,function*(){let t=l(r),n;if(t.token?n=yield G(e,!0):n=yield G(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let t=l(r);if(t.token){let n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,o=t.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,o),Math.max(0,n-Date.now())}else return 0},de.RETRIAL_MIN_WAIT,de.RETRIAL_MAX_WAIT)}function st(e,r){let t=l(e).tokenObservers;for(let n of t)try{n.type==="EXTERNAL"&&r.error!=null?n.error(r.error):n.next(r)}catch{}}function _(e){return e.expireTimeMillis-Date.now()>0}function he(e){return{token:rt(tt),error:e}}var X=class{constructor(r,t){this.app=r,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:r}=l(this.app);for(let t of r)ve(this.app,t.next);return Promise.resolve()}};function at(e,r){return new X(e,r)}function ct(e){return{getToken:r=>G(e,r),getLimitedUseToken:()=>nt(e),addTokenListener:r=>ot(e,"INTERNAL",r),removeTokenListener:r=>ve(e.app,r)}}var ut="@firebase/app-check",lt="0.8.7";var pt="app-check",ge="app-check-internal";function dt(){$(new x(pt,e=>{let r=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return at(r,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,t)=>{e.getProvider(ge).initialize()})),$(new x(ge,e=>{let r=e.getProvider("app-check").getImmediate();return ct(r)},"PUBLIC").setInstantiationMode("EXPLICIT")),d(ut,lt)}dt();var ft=["localhost","0.0.0.0","127.0.0.1"],wr=typeof window<"u"&&ft.includes(window.location.hostname);export{j as a,_t as b,bt as c,ye as d,H as e,le as f,yt as g,Re as h,De as i,v as j,B as k,$t as l,qt as m,Zt as n,Gt as o,Xt as p,Yt as q};
